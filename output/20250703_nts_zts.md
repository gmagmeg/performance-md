---
marp: true
theme: custom
---

# NTS/ZTS
## PHPビルドバージョンの比較

---

## 概要

PHPには2つのビルドバージョンがあります
それぞれ異なる実行環境に最適化されています

1. NTS（Non Thread Safe）
1. ZTS（Zend Thread Safe）
---


## NTS（Non Thread Safe）

シングルスレッド環境向けに最適化されたビルド
スレッド間の排他制御が不要

## ZTS（Zend Thread Safe）

マルチスレッド環境で安全に動作する
メモリやリソースへのアクセスを同期化する仕組みを持つ

---

| 項目 | NTS (Non Thread Safe) | ZTS (Zend Thread Safe) |
| --- | --- | --- |
| 対象環境 | シングルスレッド<br>（プロセスベース） | マルチスレッド環境 |
| メモリ使用量 | プロセスごとに全体を複製<br>（非効率） | スレッド間でコード共有<br>（効率的） |
| 主な利用場面 | CLI、PHP-FPM、mod_php <br>(prefork) | FrankenPHP、Swoole|
