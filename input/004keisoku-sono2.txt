# PHP実行環境パフォーマンス比較

## PHP実行環境比較結果

4つの実行環境でパフォーマンス測定を実施
各環境で記事投稿+取得のテストシナリオを実行

| 環境 | 平均レスポンス | P90レスポンス | スループット | 最大メモリ |
|------|---------------|---------------|-------------|-------------|
| **FrankenPHP** | **12.74ms** | **19.51ms** | **28.65 RPS** | 288.4MiB |
| **Swoole** | 13.26ms | 20.51ms | 28.58 RPS | 962.9MiB |
| Nginx+PHP | 17.41ms | 25.54ms | 28.06 RPS | **91.95MiB** |
| Apache+PHP | 18.46ms | 27.99ms | 28.49 RPS | 462.1MiB |

FrankenPHPが最高のレスポンス性能
Nginx+PHPが最少のメモリ使用量

---

## レスポンス時間詳細比較

各処理別のレスポンス時間（P90）

### POST処理（記事作成）
| 環境 | P90レスポンス |
|------|---------------|
| **Swoole** | **45.64ms** |
| **FrankenPHP** | **45.86ms** |
| Apache+PHP | 49.61ms |
| Nginx+PHP | 50.53ms |

### GET処理（記事取得）  
| 環境 | P90レスポンス |
|------|---------------|
| **FrankenPHP** | **15.48ms** |
| **Swoole** | **16.38ms** |
| Nginx+PHP | 20.69ms |
| Apache+PHP | 22.45ms |

FrankenPHP、Swooleが高速
従来環境より30-40%高速

---

## メモリ使用量比較

最大メモリ使用量の比較

| 環境 | 最大メモリ使用量 | 効率性 |
|------|-----------------|--------|
| **Nginx+PHP** | **91.95MiB** | **最優秀** |
| FrankenPHP | 288.4MiB | 良好 |
| Apache+PHP | 462.1MiB | 普通 |
| Swoole | 962.9MiB | 要注意 |

Nginx+PHPが最もメモリ効率が良い
Swooleはメモリ使用量が多い
FrankenPHPはバランス型

---

## 技術的特徴と推奨用途

### FrankenPHP
**特徴**: Go製、HTTP/2対応、高速
**適用**: 高トラフィック、リアルタイム要件
**推奨**: パフォーマンス重視のAPI

### Swoole
**特徴**: 非同期、コルーチン対応
**適用**: WebSocket、リアルタイム通信
**注意**: メモリ使用量の監視必要

### Nginx+PHP-FPM
**特徴**: 省メモリ、安定性
**適用**: コスト重視、長時間稼働
**推奨**: 一般的なWebアプリケーション

### Apache+mod_php
**特徴**: 設定簡単、互換性良好
**適用**: レガシー環境、開発環境
**推奨**: 互換性重視のシステム

---

## まとめ・推奨事項

### パフォーマンス重視
1. **FrankenPHP**: 総合最優秀
2. **Swoole**: 非同期処理に最適

### メモリ効率重視
1. **Nginx+PHP**: 最小メモリ使用量
2. **FrankenPHP**: バランス型

### 用途別推奨
- **API サーバー**: FrankenPHP
- **リアルタイム**: Swoole  
- **一般Web**: Nginx+PHP
- **レガシー**: Apache+PHP

環境選択時はトラフィック量と
インフラコストを総合的に検討